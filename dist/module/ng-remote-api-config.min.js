!function(a){"use strict";var b=a.module("ngRemoteApiConfig",["lodashAngularWrapper"]);b.provider("apiConfigService",function(){var b=this;b.options={apiConfigPath:"/ ",apiRoot:"http://localhost",override:{},sectionHandlers:{services:{valueProcessor:function(a,b){return _.mapValues(a,function(a){return b+a})}},envName:{reduceFunction:function(a,b){return a!==b&&$log.warn("*** envNames do not match: ",a,b),b}}}},b.$get=function(c,d,e,f){var g={},h=b.options,i=null;g.get=function(){return i=i||j(b.options.apiRoot).then(function(a){return e.merge({},a,b.options.override)})};var j=function(a,d){if(d)return k(d,a);var e={method:"GET",cache:"false",url:a+b.options.apiConfigPath};return c(e).then(function(b){return k(b.data,a)})},k=function(a,b){var c={};if(d.debug("*** API CONFIG: for apiRoot:",b,a),!a)throw["*** ERROR API CONFIG: for apiRoot:"+b+" config json is not available "];e.forEach(a,function(a,d){"$"!==d[0]&&(h.sectionHandlers[d]&&h.sectionHandlers[d].valueProcessor?c[d]=h.sectionHandlers[d].valueProcessor(a,b):c[d]=a)});var g={};a.$external&&(g=e.mapValues(a.$external,function(a){return j(a.$url,a)}));var i={};a.$apiHosts&&(i=e.mapValues(a.$apiHosts,function(a){return j(a)}).valueOf());var k=function(a){return e(a).reduce(function(a,b){return e.forEach(b,function(b,c){"$"!==c[0]&&(h.sectionHandlers[c]&&h.sectionHandlers[c].reduceFunction?a[c]=h.sectionHandlers[c].reduceFunction(a[c],b):e.isObject(b)?a[c]=e.assign(a[c]||{},b):a[c]=b)}),a})};return f.all(e(i).assign({currentEnv__:c},g).valueOf()).then(k)};return g.getUrl=function(b){if(a.isString(b.url))return f.when(b);if(!b.serviceName)throw["*** API CONFIG: The service name is not defined. "];return g.get().then(function(c){var d=c.services[b.serviceName],e=a.extend({},b);if(!d)throw["*** API CONFIG: The service not found. The serviceName:"+b.serviceName+" ."];return e.url=c.services[b.serviceName]+(b.resourcePath||""),delete e.serviceName,delete e.resourcePath,e})},g.get().then(function(a){d.debug("*** API CONFIG retrieved:",a)}),g}}),b.factory("httpConfigured",function(b,c){var d="GET",e="POST",f="DELETE",g="PUT",h=function(h){function i(a){return function(b,c){return j.service(a,b,c)}}var j=function(d){return a.isString(d.url)?b(d):c.getUrl(d).then(function(a){return b(a)})};return j.options=h,j.service=function(b,c,d){return j.data(d).resource(c),a.extend(j.options,{serviceName:b}),j},j.resource=function(b,c){return j.data(c),a.isString(b)&&b&&a.extend(j.options,{resourcePath:b}),j},j.get=function(b){return j.data(b),a.extend(j.options,{method:d}),j(j.options)},j.post=function(b){return j.data(b),a.extend(j.options,{method:e}),j(j.options)},j.put=function(b){return j.data(b),a.extend(j.options,{method:g}),j(j.options)},j["delete"]=function(b){return j.data(b),a.extend(j.options,{method:f}),j(j.options)},j.data=function(b){return a.isObject(b)&&b&&a.extend(j.options,{data:b}),j},j.s={},c.get().then(function(b){a.forEach(b.services,function(a,b){j.s[b]=i(b)})}),j};return h({})}).factory("httpC",function(a){return a})}(window.angular);